framework:
    secret: '%env(APP_SECRET)%'

    # HTTP Cache (si usas API Platform es recomendable)
    http_method_override: false

    # Sessions: solo cuando se usan (JWT no requiere sesi√≥n)
    session:
        enabled: true
        handler_id: null
        cookie_secure: auto
        cookie_samesite: lax
        cookie_httponly: true

    # Serializer, recomendado para API Platform
    serializer:
        enable_annotations: false

    # Validation
    validation:
        enable_annotations: false

    # Translator (desactiva si no usas traducciones)
    translator:
        default_path: '%kernel.project_dir%/translations'
        fallbacks:
            - en
            - es

    # Default cache (Redis ya lo tienes configurado en cache.yaml)
    cache:
        app: cache.adapter.redis
        system: cache.adapter.redis
        default_redis_provider: 'redis://redis:6379'

    # Handle trusted reverse proxies (traefik/caddy/nginx)
    trusted_proxies: '%env(TRUSTED_PROXIES)%'
    trusted_hosts: '%env(TRUSTED_HOSTS)%'

    # Messenger (si lo usas, lo ajustamos)
    messenger:
        default_bus: messenger.bus.default


when@test:
    framework:
        test: true
        session:
            storage_factory_id: session.storage.factory.mock_file
